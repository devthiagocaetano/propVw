@use "sass:list";
@use "sass:math";
@use "sass:string";

@function getBreakpoint($list, $condition) {
  @return map-get($list, $condition);
}

@mixin writeProp($prop: null, $value: null, $context: null, $unit: null) {

  @if list.length($value)==1 {
    @if $unit==1vw {
      #{$prop}: (convertPxVw($value, $context));
    }

    @else {
      #{$prop}: ($value * 1px);
    }
  }

  @else {
    $finalValue: null;

    @each $val in $value {
      @if $unit==1vw {
        $finalValue: list.append($finalValue, convertPxVw($val, $context));
      }

      @else {
        $finalValue: list.append($finalValue, $val * 1px);
      }
    }

    #{$prop}: ($finalValue);
  }
}

@function convertPxVw($size: null, $context: null) {

  @if $size==null and $context==null and $unit==null {
    @error "convertPxVw needs size and context params.";
  }

  @return math.div($size, $context * 0.01) *1vw;
}

@function countTerm($string, $term: 'fill:') {
  $-position: string.index($string, $term);
  $-term-length: string.length($term);
  $-term-length: $term-length -1;
  $-count: 0;

  @while $-position !=null {
    $string: string.slice($string, ($-position + $term-length));
    $-position: string.index($string, $term);
    $-count: $-count + 1;
  }

  @return $-count;
}

@function applyDefaultColors($string, $query: 'fill') {
  $-query: $query;
  $-query-length: string.length($-query);
  $-query-length: $-query-length -1;
  $-actual-color: getIndex($string, $-query);
  $-final-string: null;

  @while $-actual-color !=null {
    $-color-index-init: (string.index($string, $-query) + 4);
    $-string-before: string.slice($string, 1, $-color-index-init);
    $-string-after: string.slice($string, $-color-index-init);
    $-color-index-final: (string.index($-string-after, '/>') - 1);
    $-string-after: string.slice($-string-after, $-color-index-final);

    $string: $-string-after;
    $-final-string: $-final-string+$-string-before+'rgb(0,0,0)';
    $-actual-color: getIndex($string, $-query);
  }

  $-final-string: $-final-string+'"/>';
  @return $-final-string;
}